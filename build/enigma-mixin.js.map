{"version":3,"file":"enigma-mixin.js","sources":["../src/mixins/object-definitions.js","../src/mixins/variables.js","../src/mixins/selections.js","../src/mixins/tables.js","../src/main.js"],"sourcesContent":["const sessionList = {\r\n    \"qInfo\": {\r\n        \"qId\": \"\",\r\n        \"qType\": \"SessionLists\"\r\n    },\r\n    \"qSelectionObjectDef\": {}\r\n}\r\n\r\nconst variableList = {\r\n    \"qInfo\": {\r\n        \"qType\": \"VariableList\"\r\n    },\r\n    \"qVariableListDef\": {\r\n        \"qType\": \"variable\"\r\n    }\r\n}\r\n\r\nmodule.exports = {\r\n    sessionList,\r\n    variableList\r\n}","const objectDefinitions = require('./object-definitions.js');\r\n\r\nasync function getAllVariables({ qDoc, showSession = false, showConfig = false, showReserved = false }) {\r\n    let objProp = objectDefinitions.variableList\r\n    objProp.qShowSession = showSession,\r\n        objProp.qShowConfig = showConfig,\r\n        objProp.qShowReserved = showReserved\r\n\r\n    let sessionObj = await qDoc.createSessionObject(objProp)\r\n    let sessionObjLayout = await sessionObj.getLayout()\r\n    return sessionObjLayout\r\n}\r\n\r\nasync function updateVariable({ qDoc, variable }) {\r\n    let variableContent = await qDoc.getVariableById(variable.qInfo.qId)\r\n    let newContent = await variableContent.setProperties(variable)\r\n\r\n    return newContent\r\n}\r\n\r\nasync function createVariable({ qDoc, variableName, variableComment = '', variableDefinition }) {\r\n    let varProps = {\r\n        \"qInfo\": {\r\n            \"qType\": \"variable\"\r\n        },\r\n        \"qName\": variableName,\r\n        \"qComment\": variableComment,\r\n        \"qDefinition\": variableDefinition\r\n    }\r\n\r\n    let result = await doc.createVariableEx(varProps)\r\n\r\n    return result\r\n}\r\n\r\n\r\nmodule.exports = {\r\n    getAllVariables,\r\n    updateVariable,\r\n    createVariable\r\n}\r\n","const objectDefinitions = require('./object-definitions.js')\r\n\r\nasync function getCurrSelectionFields() {\r\n    let sessionObj = await _this.api.createSessionObject(objectDefinitions.sessionList)\r\n    let selections = await sessionObj.getLayout()\r\n    return selections\r\n}\r\n\r\nasync function getCurrentSelections() {\r\n\r\n    let selections = await getCurrSelectionFields()\r\n\r\n    let fieldsSelected = selections.qSelectionObject.qSelections.map(function (s) {\r\n        return s.qField\r\n    })\r\n\r\n    // let fields = await getSelectionFields(doc, fieldsSelected)\r\n    return { selections: selections.qSelectionObject.qSelections, fields: fieldsSelected }\r\n}\r\n\r\nasync function selectInField({ fieldName, values, toggle = false }) {\r\n    let field = await _this.api.getField(fieldName)\r\n\r\n    let valuesToSelect = values.map(function (v) {\r\n        return {\r\n            qText: v\r\n        }\r\n    })\r\n\r\n    try {\r\n        let selection = await field.selectValues({ qFieldValues: valuesToSelect, qToggleMode: toggle })\r\n        return selection\r\n    } catch(e) {\r\n        console.log(e.message)\r\n        return false\r\n    }\r\n}\r\n\r\nmodule.exports = {\r\n    getCurrSelectionFields,\r\n    selectInField,\r\n    getCurrentSelections\r\n}\r\n","async function getTablesAndKeys(qDoc) {\r\n\r\n    let tables = await qDoc.getTablesAndKeys({}, {}, 0, true, false)\r\n\r\n    let f = [];\r\n\r\n    for (let table of tables.qtr) {\r\n        for (let field of table.qFields) {\r\n            f.push({ table: table.qName, field: field.qName })\r\n        }\r\n    }\r\n\r\n    return { tables: tables, fields: f }\r\n}\r\n\r\nasync function getTablesAndFields(qDoc) {\r\n    let tables = await qDoc.getTablesAndKeys({}, {}, 0, true, false)\r\n\r\n    let f = [];\r\n\r\n    for (let table of tables.qtr) {\r\n        for (let field of table.qFields) {\r\n            f.push({ table: table.qName, field: field.qName })\r\n        }\r\n    }\r\n\r\n    return f\r\n}\r\n\r\nasync function getTables(qDoc) {\r\n    let tables = await qDoc.getTablesAndKeys({}, {}, 0, true, false)\r\n\r\n    let t = [];\r\n\r\n    for (let table of tables.qtr) {\r\n        t.push(table.qName)\r\n    }\r\n\r\n    return t\r\n}\r\n\r\nasync function getFields(qDoc) {\r\n\r\n    let tables = await qDoc.getTablesAndKeys({}, {}, 0, true, false)\r\n\r\n    let f = [];\r\n\r\n    for (let table of tables.qtr) {\r\n        for (let field of table.qFields) {\r\n            f.push(field.qName)\r\n        }\r\n    }\r\n\r\n    return f\r\n}\r\n\r\nmodule.exports = {\r\n    getTablesAndKeys,\r\n    getTablesAndFields,\r\n    getTables,\r\n    getFields\r\n}","const qVariables = require('./mixins/variables.js')\r\nconst qSelections = require('./mixins/selections.js')\r\nconst qTablesAndFields = require('./mixins/tables.js')\r\n\r\nconst docMixin = {\r\n    types: ['Doc'],\r\n    init(args) {\r\n        _this = args\r\n        ConfiguredPromise = args.config.Promise;\r\n    },\r\n    extend: {\r\n        mixin: {\r\n            qVariables,\r\n            qSelections,\r\n            qTablesAndFields\r\n        }\r\n    },\r\n};\r\n\r\nmodule.exports = docMixin"],"names":["sessionList","variableList","getAllVariables","qDoc","showSession","showConfig","showReserved","objProp","objectDefinitions","qShowSession","qShowConfig","qShowReserved","sessionObj","createSessionObject","sessionObjLayout","getLayout","updateVariable","variable","variableContent","getVariableById","qInfo","qId","newContent","setProperties","createVariable","variableName","variableComment","variableDefinition","varProps","result","doc","createVariableEx","getCurrSelectionFields","_this","api","selections","getCurrentSelections","fieldsSelected","qSelectionObject","qSelections","map","s","qField","fields","selectInField","fieldName","values","toggle","field","getField","valuesToSelect","v","qText","selection","selectValues","qFieldValues","qToggleMode","e","console","log","message","getTablesAndKeys","tables","f","table","qtr","qFields","push","qName","getTablesAndFields","getTables","t","getFields","docMixin","types","init","args","ConfiguredPromise","config","Promise","extend","mixin","qVariables","qTablesAndFields"],"mappings":"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"}