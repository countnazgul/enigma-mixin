!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self)["enigma-mixin"]=t()}(this,function(){"use strict";var e={sessionList:{qInfo:{qId:"",qType:"SessionLists"},qSelectionObjectDef:{}},variableList:{qInfo:{qType:"VariableList"},qVariableListDef:{qType:"variable"}},listBox:{qInfo:{qId:"",qType:"Combo"},field:{qListObjectDef:{qStateName:"$",qDef:{qFieldDefs:[],qSortCriterias:[{qSortByState:1,qExpression:{}}]},qInitialDataFetch:[{qTop:0,qLeft:0,qHeight:100,qWidth:1}]}}}};async function t(t){try{let r=await t.createSessionObject(e.sessionList);return await r.getLayout()}catch(e){throw new Error(e.message)}}const r=["barchart","bookmark","combochart","dimension","embeddedsnapshot","filterpane","gauge","kpi","linechart","listbox","LoadModel","map","masterobject","measure","piechart","pivot-table","scatterplot","sheet","slide","slideitem","snapshot","story","StringExpression","table","treemap"];const s=async function(e,t){let r=!1,s={};try{let i=await e.getObject(t);(s=await i.getProperties()).extensionMeta&&(r=!0)}catch(e){throw new Error(e.message)}return{qObjProps:s,isExtension:r}};return{types:["Doc"],init(e){},extend:{...{mGetSelectionsCurr:async function(){try{let e=await t(this),r=e.qSelectionObject.qSelections.map(function(e){return e.qField});return{selections:e.qSelectionObject.qSelections,fields:r}}catch(e){throw new Error(e.message)}},mGetSelectionsCurrNative:async function(){try{return await t(this)}catch(e){throw new Error(e.message)}},mSelectInField:async function({fieldName:e,values:t,toggle:r=!1}){try{let s=await this.getField(e),i=t.map(function(e){return{qText:e}});try{return await s.selectValues({qFieldValues:i,qToggleMode:r})}catch(e){throw new Error(e.message)}}catch(e){throw new Error(e.message)}}},...{mGetTablesAndFields:async function(){try{let e=await this.getTablesAndKeys({},{},0,!0,!1),t=[];if(0==e.qtr.length)return t;for(let r of e.qtr)for(let e of r.qFields)t.push({table:r.qName,field:e.qName});return t}catch(e){throw new Error(e.message)}},mGetTables:async function(){try{let e=await this.getTablesAndKeys({},{},0,!0,!1),t=[];if(0==e.length)return t;for(let r of e.qtr)t.push(r.qName);return t}catch(e){throw new Error(e.message)}},mGetFields:async function(){try{let e=await this.getTablesAndKeys({},{},0,!0,!1),t=[];for(let r of e.qtr)for(let e of r.qFields)t.push(e.qName);return t}catch(e){throw new Error(e.message)}},mGetListbox:async function(t){try{let r=e.listBox;r.field.qListObjectDef.qDef.qFieldDefs.push(t);let s=await this.createSessionObject(r);return(await s.getLayout()).field.qListObject}catch(e){throw new Error(e.message)}}},...{mGetVariablesAll:async function({showSession:t=!1,showConfig:r=!1,showReserved:s=!1}={}){let i=e.variableList;i.qShowSession=t,i.qShowConfig=r,i.qShowReserved=s;try{let e=await this.createSessionObject(i);return(await e.getLayout()).qVariableList.qItems}catch(e){throw new Error(e.message)}},mUpdateVariable:async function(e){try{let t=await this.getVariableById(e.qInfo.qId);return await t.setProperties(e)}catch(e){throw new Error(e.message)}},mCreateVariable:async function({name:e,comment:t="",definition:r}){let s={qInfo:{qType:"variable"},qName:e,qComment:t,qDefinition:r};try{return await this.createVariableEx(s)}catch(e){throw new Error(e.message)}}},...{mGetAllExtensionObjects:async function(){let e=await this.getAllInfos();return await async function(e,t){let i=t.filter(function(e){return-1==r.indexOf(e.qType)}),a=[];if(i.length>0){for(let t of i){let r=await s(e,t.qId);r.isExtension&&a.push({appName:e.id,objId:r.qObjProps.qInfo.qId,objType:r.qObjProps.qInfo.qType,extName:r.qObjProps.extensionMeta.name,extVersion:r.qObjProps.version,extVisible:r.qObjProps.extensionMeta.visible,extIsBundle:!r.qObjProps.extensionMeta.isThirdParty,extIsLibrary:r.qObjProps.extensionMeta.isLibraryItem,qProps:r.qObjProps})}return a}return[]}(this,e)}}}}});
//# sourceMappingURL=enigma-mixin.min.js.map
