{"version":3,"file":"enigma-mixin.js","sources":["../src/mixins/doc/object-definitions.js","../src/lib/helpers.js","../src/mixins/doc/qVariables.js","../src/mixins/doc/qSelections.js","../src/mixins/doc/qTablesAndFields.js","../src/mixins/doc/extension-objects.js","../src/mixins/doc/unbuild.js","../src/mixins/doc/build.js","../src/main.js"],"sourcesContent":["const sessionList = {\r\n    \"qInfo\": {\r\n        \"qId\": \"\",\r\n        \"qType\": \"SessionLists\"\r\n    },\r\n    \"qSelectionObjectDef\": {}\r\n}\r\n\r\nconst variableList = {\r\n    \"qInfo\": {\r\n        \"qType\": \"VariableList\"\r\n    },\r\n    \"qVariableListDef\": {\r\n        \"qType\": \"variable\"\r\n    }\r\n}\r\n\r\nconst listBox = {\r\n    \"qInfo\": {\r\n        \"qId\": \"\",\r\n        \"qType\": \"\"\r\n    },\r\n    \"field\": {\r\n        \"qListObjectDef\": {\r\n            \"qStateName\": \"$\",\r\n            \"qDef\": {\r\n                \"qFieldDefs\": [],\r\n                \"qSortCriterias\": [{\r\n                    \"qSortByState\": 1,\r\n                    \"qExpression\": {}\r\n                }]\r\n            },\r\n            \"qInitialDataFetch\": [{\r\n                \"qTop\": 0,\r\n                \"qLeft\": 0,\r\n                \"qHeight\": 10000,\r\n                \"qWidth\": 1\r\n            }]\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = {\r\n    sessionList,\r\n    variableList,\r\n    listBox\r\n}","const handlePromise = (promise) => {\r\n    return promise\r\n        .then(data => ([data, undefined]))\r\n        .catch(error => Promise.resolve([undefined, error]));\r\n}\r\n\r\nmodule.exports = {\r\n    handlePromise\r\n}","const objectDefinitions = require('./object-definitions.js');\r\nconst { handlePromise } = require('../../lib/helpers');\r\n\r\nasync function mVariableGetAll(showSession = false, showConfig = false, showReserved = false) {\r\n    let objProp = objectDefinitions.variableList\r\n    objProp.qShowSession = showSession\r\n    objProp.qShowConfig = showConfig\r\n    objProp.qShowReserved = showReserved\r\n\r\n    let [sessionObj, sessionObjError] = await handlePromise(this.createSessionObject(objProp))\r\n    if (sessionObjError) throw new Error(sessionObjError.message)\r\n\r\n    let [layout, layoutError] = await handlePromise(sessionObj.getLayout())\r\n    if (layoutError) throw new Error(layoutError.message)\r\n\r\n    return layout.qVariableList.qItems\r\n}\r\n\r\nasync function mVariableUpdateById(id, definition, comment = undefined) {\r\n    let [variable, variableError] = await handlePromise(this.getVariableById(id))\r\n    if (variableError) throw new Error(variableError.message)\r\n\r\n    let [variableProps, variablePropsError] = await handlePromise(variable.getProperties())\r\n    if (variablePropsError) throw new Error(variablePropsError.message)\r\n\r\n    variableProps.qDefinition = definition\r\n    if (comment) variableProps.qComment = comment\r\n\r\n    let [setProps, setPropsError] = await handlePromise(variable.setProperties(variableProps))\r\n    if (setPropsError) throw new Error(setPropsError.message)\r\n\r\n    let [newProps, newPropsError] = await handlePromise(variable.getProperties())\r\n    if (newPropsError) throw new Error(newPropsError.message)\r\n\r\n    return newProps\r\n}\r\n\r\nasync function mVariableUpdateByName(name, definition, comment = undefined) {\r\n    let [variable, variableError] = await handlePromise(this.getVariableByName(name))\r\n    if (variableError) throw new Error(variableError.message)\r\n\r\n    let [variableProps, variablePropsError] = await handlePromise(variable.getProperties())\r\n    if (variablePropsError) throw new Error(variablePropsError.message)\r\n\r\n    variableProps.qDefinition = definition\r\n    if (comment) variableProps.qComment = comment\r\n\r\n    let [setProps, setPropsError] = await handlePromise(variable.setProperties(variableProps))\r\n    if (setPropsError) throw new Error(setPropsError.message)\r\n\r\n    let [newProps, newPropsError] = await handlePromise(variable.getProperties())\r\n    if (newPropsError) throw new Error(newPropsError.message)\r\n\r\n    return newProps\r\n}\r\n\r\nasync function mVariableCreate(name = '', definition = '', comment = '') {\r\n    let varProps = {\r\n        \"qInfo\": {\r\n            \"qType\": \"variable\"\r\n        },\r\n        \"qName\": name,\r\n        \"qDefinition\": definition,\r\n        \"qComment\": comment\r\n    }\r\n\r\n    let [created, createdError] = await handlePromise(this.createVariableEx(varProps))\r\n    if (createdError) throw new Error(createdError.message)\r\n\r\n    let [props, propsError] = await handlePromise(created.getProperties())\r\n    if (propsError) throw new Error(propsError.message)\r\n\r\n    return props\r\n}\r\n\r\nmodule.exports = {\r\n    mVariableGetAll,\r\n    mVariableUpdateById,\r\n    mVariableUpdateByName,\r\n    mVariableCreate\r\n}\r\n","const objectDefinitions = require('./object-definitions.js')\r\nconst { handlePromise } = require('../../lib/helpers');\r\n\r\nasync function iGetSelectionsNative(qDoc) {\r\n    let [sessionObj, sessionObjError] = await handlePromise(qDoc.createSessionObject(objectDefinitions.sessionList))\r\n    if (sessionObjError) throw new Error(sessionObjError.message)\r\n\r\n    let [selections, selectionsError] = await handlePromise(sessionObj.getLayout())\r\n    if (selectionsError) throw new Error(selectionsError.message)\r\n\r\n    let [destroy, destroyError] = await handlePromise(qDoc.destroySessionObject(sessionObj.id))\r\n    if (destroyError) throw new Error(destroyError.message)\r\n\r\n    return selections\r\n}\r\n\r\nasync function mSelectionsAll() {\r\n    let [selections, error] = await handlePromise(iGetSelectionsNative(this))\r\n    if (error) throw new Error(error.message)\r\n\r\n    return selections.qSelectionObject\r\n}\r\n\r\nasync function mSelectionsFields() {\r\n    let [selections, error] = await handlePromise(iGetSelectionsNative(this))\r\n    if (error) throw new Error(error.message)\r\n\r\n    let fieldsSelected = selections.qSelectionObject.qSelections.map(function (s) {\r\n        return s.qField\r\n    })\r\n\r\n    return fieldsSelected\r\n}\r\n\r\nasync function mSelectionsSimple(groupByField = false) {\r\n    let [selections, error] = await handlePromise(iGetSelectionsNative(this))\r\n    if (error) throw new Error(error.message)\r\n\r\n    if (!groupByField)\r\n        return selections.qSelectionObject.qSelections.map(function (s) {\r\n            return s.qSelectedFieldSelectionInfo.map(function (f) {\r\n                return { field: s.qField, value: f.qName }\r\n            })\r\n        }).flat()\r\n\r\n\r\n    return selections.qSelectionObject.qSelections.map(function (s) {\r\n        let values = s.qSelectedFieldSelectionInfo.map(function (f) {\r\n            return f.qName\r\n        })\r\n\r\n        return { field: s.qField, values }\r\n    })\r\n}\r\n\r\nasync function mSelectInField(fieldName, values, toggle = false) {\r\n    let lbDef = objectDefinitions.listBox\r\n    lbDef.field.qListObjectDef.qDef.qFieldDefs = [fieldName]\r\n    lbDef.qInfo.qType = \"session-listbox\"\r\n\r\n    let [sessionObj, sessionObjErr] = await handlePromise(this.createSessionObject(lbDef))\r\n    if (sessionObjErr) throw new Error(sessionObjErr.message)\r\n\r\n    let [layout, layoutError] = await handlePromise(sessionObj.getLayout())\r\n    if (layoutError) throw new Error(layoutError.message)\r\n\r\n    let index = layout.field.qListObject.qDataPages[0].qMatrix.filter(function (m) {\r\n        return values.indexOf(m[0].qText) > -1\r\n    }).map(function (e) {\r\n        return e[0].qElemNumber\r\n    })\r\n\r\n    let [selection, selectionError] = await handlePromise(sessionObj.selectListObjectValues('/field/qListObjectDef', index, toggle))\r\n    if (selectionError) throw new Error(selectionError.message)\r\n\r\n    let [destroy, destroyError] = await handlePromise(this.destroySessionObject(sessionObj.id))\r\n    if (destroyError) throw new Error(destroyError.message)\r\n\r\n    return selection\r\n}\r\n\r\nmodule.exports = {\r\n    mSelectionsAll,\r\n    mSelectionsFields,\r\n    mSelectionsSimple,\r\n    mSelectInField\r\n}\r\n","const objectDefinitions = require('./object-definitions.js')\r\nconst { handlePromise } = require('../../lib/helpers');\r\n\r\nasync function mGetTablesAndFields() {\r\n    let [tables, error] = await handlePromise(this.getTablesAndKeys({}, {}, 0, true, false))\r\n    if (error) throw new Error(error.message)\r\n\r\n    return tables.qtr.map(function (t) {\r\n        return t.qFields.map(function (f) {\r\n            return { table: t.qName, field: f.qName }\r\n        })\r\n    }).flat()\r\n}\r\n\r\nasync function mGetTables() {\r\n    let [qTables, qTablesError] = await handlePromise(this.getTablesAndKeys({}, {}, 0, true, false))\r\n    if (qTablesError) throw new Error(qTablesError.message)\r\n\r\n    return qTables.qtr.map((t) => t.qName)\r\n}\r\n\r\nasync function mGetFields() {\r\n    let [qTables, qTablesError] = await handlePromise(this.getTablesAndKeys({}, {}, 0, true, false))\r\n    if (qTablesError) throw new Error(qTablesError.message)\r\n\r\n    return qTables.qtr.map(function (t) {\r\n        return t.qFields.map(function (f) {\r\n            return f.qName\r\n        })\r\n    }).flat()\r\n}\r\n\r\nasync function mCreateSessionListbox(fieldName, type = \"session-listbox\") {\r\n    let lbDef = objectDefinitions.listBox\r\n    lbDef.field.qListObjectDef.qDef.qFieldDefs = [fieldName]\r\n    lbDef.qInfo.qType = type\r\n\r\n    let [sessionObj, sessionObjErr] = await handlePromise(this.createSessionObject(lbDef))\r\n    if (sessionObjErr) throw new Error(sessionObjErr.message)\r\n\r\n    let [layout, layoutError] = await handlePromise(sessionObj.getLayout())\r\n    if (layoutError) throw new Error(layoutError.message)\r\n\r\n    return {\r\n        sessionObj,\r\n        layout\r\n    }\r\n}\r\n\r\nmodule.exports = {\r\n    mGetTablesAndFields,\r\n    mGetTables,\r\n    mGetFields,\r\n    mCreateSessionListbox\r\n} ","const { handlePromise } = require('../../lib/helpers');\r\n\r\nasync function mExtensionObjectsAll() {\r\n    let [allInfos, error] = await handlePromise(this.getAllInfos())\r\n    if (error) throw new Error(error.message)\r\n\r\n    return await filterOnlyExtensionObjects(this, allInfos)\r\n}\r\n\r\nasync function filterOnlyExtensionObjects(qDoc, allObjects) {    \r\n    return await Promise.all(allObjects.map(async function (extObj) {\r\n        let isReallyExtension = await realExtensionCheck(qDoc, extObj.qId)\r\n\r\n        if (isReallyExtension.isExtension) {\r\n            return {\r\n                appName: qDoc.id,\r\n                objId: isReallyExtension.qObjProps.qInfo.qId,\r\n                objType: isReallyExtension.qObjProps.qInfo.qType,\r\n                extName: isReallyExtension.qObjProps.extensionMeta.name,\r\n                extVersion: isReallyExtension.qObjProps.version,\r\n                extVisible: isReallyExtension.qObjProps.extensionMeta.visible,\r\n                extIsBundle: !isReallyExtension.qObjProps.extensionMeta.isThirdParty,\r\n                extIsLibrary: isReallyExtension.qObjProps.extensionMeta.isLibraryItem,\r\n                qProps: isReallyExtension.qObjProps\r\n            }\r\n        }\r\n    })).then(function (o) {\r\n        // make sure we filter out all object which are not \r\n        // native object but are not extensions as well \r\n        return o.filter(function (a) {\r\n            return a != undefined\r\n        })\r\n    })\r\n}\r\n\r\nconst realExtensionCheck = async function (qDoc, objId) {\r\n    let nativeObjectTypes = [\r\n        \"barchart\",\r\n        \"boxplot\",\r\n        \"combochart\",\r\n        \"distributionplot\",\r\n        \"gauge\",\r\n        \"histogram\",\r\n        \"kpi\",\r\n        \"linechart\",\r\n        \"piechart\",\r\n        \"pivot-table\",\r\n        \"scatterplot\",\r\n        \"table\",\r\n        \"treemap\",\r\n        \"extension\",\r\n        \"map\",\r\n        \"listbox\",\r\n        \"filterpane\",\r\n        \"title\",\r\n        \"paragraph\"\r\n    ]\r\n\r\n    let [qObj, qObjError] = await handlePromise(qDoc.getObject(objId))\r\n    if (qObjError) return { isExtension: false }\r\n\r\n    let [qObjProps, qObjPropsError] = await handlePromise(qObj.getProperties())\r\n    if (qObjPropsError) throw new Error(qObjPropsError.message)\r\n    if (!qObjProps.visualization) return { isExtension: false }\r\n\r\n    let isNative = nativeObjectTypes.indexOf(qObjProps.visualization)\r\n    return { qObjProps, isExtension: (isNative == -1 && qObjProps.extensionMeta) ? true : false }\r\n}\r\n\r\nmodule.exports = {\r\n    mExtensionObjectsAll\r\n}","const objectDefinitions = require('./object-definitions.js');\r\nconst { handlePromise } = require('../../lib/helpers');\r\n\r\nasync function mUnbuild() {\r\n    return await Promise.all([\r\n        await unbuildVariables(this),\r\n        await unbuildScript(this),\r\n        await unbuildAppProperties(this),\r\n        await unbuildConnections(this),\r\n        await unbuildEntities(this)\r\n    ]).then((data) => ({\r\n        variables: data[0],\r\n        script: data[1],\r\n        appProperties: data[2],\r\n        connections: data[3],\r\n        dimensions: data[4].dimensions,\r\n        measures: data[4].measures,\r\n        objects: data[4].objects\r\n    }))\r\n}\r\n\r\nasync function unbuildVariables(app) {\r\n    let objProp = objectDefinitions.variableList\r\n    objProp.qShowSession = false\r\n    objProp.qShowConfig = false\r\n    objProp.qShowReserved = false\r\n\r\n    let [sessionObj, sessionObjErr] = await handlePromise(app.createSessionObject(objProp))\r\n    if (sessionObjErr) throw new Error('unbuild variables: cannot create session object');\r\n\r\n    let [sessionObjLayout, sessionObjLayoutErr] = await handlePromise(sessionObj.getLayout())\r\n    if (sessionObjLayoutErr) throw new Error('unbuild variables: cannot get session object layout');\r\n\r\n    let [delSessionObj, delSessionObjErr] = await handlePromise(app.destroySessionObject(sessionObj.id))\r\n    if (delSessionObjErr) throw new Error('unbuild variables: cannot delete session object');\r\n\r\n    return sessionObjLayout.qVariableList.qItems\r\n}\r\n\r\nasync function unbuildScript(app) {\r\n    let [script, scriptErr] = await handlePromise(app.getScript())\r\n    if (scriptErr) throw new Error('unbuild script: cannot fetch script');\r\n\r\n    return script\r\n}\r\n\r\nasync function unbuildAppProperties(app) {\r\n    let [appProperties, appPropertiesError] = await handlePromise(app.getAppProperties())\r\n    if (appPropertiesError) throw new Error('unbuild app properties: cannot fetch app properties');\r\n\r\n    return appProperties\r\n\r\n}\r\n\r\nasync function unbuildConnections(app) {\r\n    let [appConnections, appConnectionsErr] = await handlePromise(app.getConnections())\r\n    if (appConnectionsErr) throw new Error('unbuild connections: cannot fetch app connections');\r\n\r\n    return appConnections\r\n}\r\n\r\nasync function unbuildEntities(app) {\r\n    let data = {\r\n        dimensions: [],\r\n        measures: [],\r\n        objects: []\r\n    }\r\n\r\n    let errors = []\r\n\r\n    // get list of all objects\r\n    let [appAllInfos, appAllInfosErr] = await handlePromise(app.getAllInfos())\r\n    if (appAllInfosErr) throw new Error('unbuild app infos: cannot fetch all app infos')\r\n\r\n    return Promise.all(appAllInfos.map(async function (item) {\r\n        if (item.qType == 'dimension') {\r\n            let [dim, dimErr] = await handlePromise(app.getDimension(item.qId))\r\n            if (dimErr) throw new Error('unbuild dimension: cannot fetch dimension')\r\n\r\n            let [dimProp, dimPropErr] = await handlePromise(dim.getProperties())\r\n            if (dimPropErr) throw new Error('unbuild dimension: cannot fetch dimension properties')\r\n\r\n            data.dimensions.push(dimProp)\r\n        }\r\n\r\n        if (item.qType == 'measure') {\r\n            let [measure, measureErr] = await handlePromise(app.getMeasure(item.qId))\r\n            if (measureErr) throw new Error('unbuild dimension: cannot fetch measure')\r\n\r\n            let [measureProp, measurePropErr] = await handlePromise(measure.getProperties())\r\n            if (measurePropErr) throw new Error('unbuild dimension: cannot fetch measure properties')\r\n\r\n            data.measures.push(measureProp)\r\n        }\r\n\r\n        if (item.qType != 'dimension' && item.qType != 'measure') {\r\n            let o = await processObject(item, app)\r\n\r\n            if (!o.error) data.objects.push(o)\r\n            if (o.error) errors.push(o)\r\n        }\r\n    })).then(() => data)\r\n}\r\n\r\nasync function processObject(item, app) {\r\n    let [obj, objErr] = await handlePromise(app.getObject(item.qId))\r\n\r\n    // embeddedsnapshot, snapshot, hiddenbookmark, story --> need to be handled differently\r\n    if (objErr) return { ...item, error: true }\r\n\r\n    let [parent, parentErr] = await handlePromise(obj.getParent())\r\n    let [children, childrenErr] = await handlePromise(obj.getChildInfos())\r\n\r\n    if (childrenErr) throw new Error(`unbuild entity: cannot fetch entity children`)\r\n\r\n    // parent-less objects - masterobject, sheet, appprops, LoadModel\r\n    if (parentErr && children.length > 0) {\r\n        let [propTree, propTreeErr] = await handlePromise(obj.getFullPropertyTree())\r\n        if (propTreeErr) throw new Error('unbuild entity: cannot fetch entity full property tree')\r\n\r\n        return propTree\r\n    }\r\n\r\n    let [prop, propErr] = await handlePromise(obj.getProperties())\r\n    if (propErr) throw new Error('unbuild entity: cannot fetch entity properties')\r\n\r\n    return prop\r\n}\r\n\r\nmodule.exports = {\r\n    mUnbuild\r\n}","const { handlePromise } = require('../../lib/helpers');\r\n\r\nasync function mBuild({\r\n    variables = [],\r\n    script = false,\r\n    appProperties = {},\r\n    connections = [],\r\n    measures = [],\r\n    dimensions = [],\r\n    objects = [] }) {\r\n\r\n    let [appConnections, error] = await handlePromise(this.getConnections())\r\n    if (error) throw new Error('build: cannot get app connections')\r\n\r\n    return Promise.all([\r\n        await processMeasures(measures, this),\r\n        await processDimensions(dimensions, this),\r\n        await processVariables(variables, this),\r\n        await processScript(script, this),\r\n        await processAppProperties(appProperties, this),\r\n        await processConnections(appConnections, connections, this),\r\n        await processObjects(objects, this)\r\n    ]).then(function (d) {\r\n        return {\r\n            measures: d[0],\r\n            dimensions: d[1],\r\n            variables: d[2],\r\n            script: d[3],\r\n            appProperties: d[4],\r\n            connections: d[5],\r\n            objects: d[6]\r\n        }\r\n    })\r\n}\r\n\r\nasync function processMeasures(measures, app) {\r\n    return Promise.all(measures.map(async function (measure) {\r\n        let [obj, objErr] = await handlePromise(app.getMeasure(measure.qInfo.qId))\r\n\r\n        // the measure do not exists and need to be created\r\n        if (objErr) {\r\n            let [created, error] = await handlePromise(app.createMeasure(measure))\r\n            if (error) throw new Error(`build measure: cannot create measure \"${measure.qInfo.qId}\": ${error.message}`)\r\n\r\n            return { qId: measure.qInfo.qId, status: 'Created' }\r\n        }\r\n\r\n        // the measure exists and need to be updated\r\n        let [updated, error] = await handlePromise(obj.setProperties(measure))\r\n        if (error) throw new Error(`build measure: cannot update measure \"${measure.qInfo.qId}\": ${error.message}`)\r\n\r\n        return { qId: measure.qInfo.qId, status: 'Updated' }\r\n    }))\r\n}\r\n\r\nasync function processDimensions(dimensions, app) {\r\n    return Promise.all(dimensions.map(async function (dimension) {\r\n        let [obj, objErr] = await handlePromise(app.getDimension(dimension.qInfo.qId))\r\n\r\n        // the dimension do not exists and need to be created\r\n        if (objErr) {\r\n            let [created, error] = await handlePromise(app.createDimension(dimension))\r\n            if (error) throw new Error(`build dimension: cannot create dimension \"${dimension.qInfo.qId}\": ${error.message}`)\r\n\r\n            return { qId: dimension.qInfo.qId, status: 'Created' }\r\n        }\r\n\r\n        // the dimension exists and need to be updated\r\n        let [updated, error] = await handlePromise(obj.setProperties(measure))\r\n        if (error) throw new Error(`build dimension: cannot update dimension \"${dimension.qInfo.qId}\": ${error.message}`)\r\n\r\n        return { qId: dimension.qInfo.qId, status: 'Updated' }\r\n    }))\r\n}\r\n\r\nasync function processScript(script, app) {\r\n    let [s, error] = await handlePromise(app.setScript(script))\r\n    if (error) throw new Error(`build script: cannot set script: ${error.message}`)\r\n\r\n    return { status: 'Set' }\r\n}\r\n\r\nasync function processAppProperties(appProperties, app) {\r\n    let [update, error] = await handlePromise(app.setAppProperties(appProperties))\r\n    if (error) throw new Error(`build app properties: cannot set app properties: ${error.message}`)\r\n\r\n    return { status: 'Set' }\r\n}\r\n\r\nasync function processVariables(variables, app) {\r\n    return Promise.all(variables.map(async function (variable) {\r\n        let [qVar, qVarError] = await handlePromise(app.getVariableByName(variable.qName))\r\n\r\n        if (qVarError) {\r\n            let [created, error] = await handlePromise(app.createVariableEx(variable))\r\n            if (error) throw new Error(`build variable: cannot create variable \"${variable.qName}\": ${error.message}`)\r\n\r\n            return { qId: variable.qName, status: 'Created' }\r\n        }\r\n\r\n        let [updated, error] = await handlePromise(qVar.setProperties(variable))\r\n        if (error) throw new Error(`build variable: cannot update variable \"${variable.qName}\": ${error.message}`)\r\n\r\n        return { qId: variable.qName, status: 'Updated' }\r\n    }))\r\n}\r\n\r\nasync function processConnections(appConnections, connections, app) {\r\n    return Promise.all(connections.map(async function (connection) {\r\n        let conn = appConnections.find(o => o.qName === connection.qName)\r\n\r\n        if (!conn) {\r\n            let [create, error] = await handlePromise(app.createConnection(connection))\r\n            if (error) throw new Error(`build connection: cannot create connection \"${connection.qName}\": ${error.message}`)\r\n\r\n            return { qId: connection.qName, status: 'Created' }\r\n        }\r\n\r\n        let [modify, error] = await handlePromise(app.modifyConnection(conn.qId, connection, true))\r\n        if (error) throw new Error(`build connection: cannot modify connection \"${connection.qName}\": ${error.message}`)\r\n\r\n        return { qId: connection.qName, status: 'Updated' }\r\n\r\n    }))\r\n}\r\n\r\nasync function processObjects(objects, app) {\r\n    return Promise.all(objects.map(async function (object) {\r\n        let objId, objType\r\n        let isGenericObject = false;\r\n\r\n        //if the object is GenericObject - the id and the type are in a slightly different path\r\n        if (!object.qInfo) {\r\n            isGenericObject = true\r\n            objId = object.qProperty.qInfo.qId\r\n            objType = object.qProperty.qInfo.qType\r\n        } else {\r\n            objId = object.qInfo.qId\r\n            objType = object.qInfo.qType\r\n        }\r\n\r\n\r\n        let [obj, objError] = await handlePromise(app.getObject(objId))\r\n\r\n        if (!objError) {\r\n            // if its GenericObject we have to set the the props using setFullPropertyTree\r\n            if (isGenericObject) {\r\n                let [updated, error] = await handlePromise(obj.setFullPropertyTree(object))\r\n                if (error) throw new Error(`build object: cannot update object \"${objId}\": ${error.message}`)\r\n\r\n                return { qId: objId, status: 'Updated' }\r\n            }\r\n\r\n            // if not GenericObject then use the \"usual\" setProperties\r\n            if (!isGenericObject) {\r\n                let [updated, error] = await handlePromise(obj.setProperties(object))\r\n                if (error) throw new Error(`build object: cannot update object \"${objId}\": ${error.message}`)\r\n\r\n                return { qId: objId, status: 'Updated' }\r\n            }\r\n        }\r\n\r\n        // same rules are applied when we have to create the object\r\n        if (objError) {\r\n            if (isGenericObject) {\r\n\r\n                let [o, oError] = await handlePromise(app.createObject({\r\n                    qInfo: {\r\n                        qId: `${objId}`,\r\n                        qType: objType\r\n                    }\r\n                }))\r\n                if (oError) throw new Error(`build object: cannot create object \"${objId}\": ${oError.message}`)\r\n\r\n                let [updated, updatedError] = await handlePromise(o.setFullPropertyTree(object))\r\n                if (updatedError) throw new Error(`build object: cannot update object \"${objId}\": ${updatedError.message}`)\r\n\r\n                return { qId: objId, status: 'Created' }\r\n            }\r\n\r\n            if (!isGenericObject) {\r\n                let [created, createdError] = await handlePromise(app.createObject(object))\r\n                if (createdError) throw new Error(`build object: cannot create object: \"${objId}\": ${createdError.message}`)\r\n\r\n                return { qId: objId, status: 'Created' }\r\n            }\r\n        }\r\n    }))\r\n}\r\n\r\nmodule.exports = {\r\n    mBuild\r\n}\r\n","const qVariables = require('./mixins/doc/qVariables.js')\r\nconst qSelections = require('./mixins/doc/qSelections.js')\r\nconst qTablesAndFields = require('./mixins/doc/qTablesAndFields.js')\r\nconst extensionObjects = require('./mixins/doc/extension-objects.js')\r\n// const unbuildVariables = require('./mixins/doc/unbuild/variables.js')\r\n// const unbuildScript = require('./mixins/doc/unbuild/script.js')\r\n// const unbuildAppProperties = require('./mixins/doc/unbuild/appProperties.js')\r\n// const unbuildConnections = require('./mixins/doc/unbuild/connections.js')\r\n// const unbuildEntities = require('./mixins/doc/unbuild/entities.js')\r\nconst unbuild = require('./mixins/doc/unbuild.js')\r\nconst build = require('./mixins/doc/build.js')\r\n\r\nconst docMixin = [\r\n    {\r\n        types: ['Doc'],\r\n        init(args) {\r\n\r\n        },\r\n        extend: {\r\n            ...qSelections,\r\n            ...qTablesAndFields,\r\n            ...qVariables,\r\n            ...extensionObjects,\r\n            // ...unbuildVariables,\r\n            // ...unbuildScript,\r\n            // ...unbuildAppProperties,\r\n            // ...unbuildConnections,\r\n            // ...unbuildEntities,\r\n            ...unbuild,\r\n            ...build\r\n        },\r\n    }\r\n]\r\n\r\nmodule.exports = docMixin"],"names":["sessionList","variableList","listBox","handlePromise","promise","then","data","undefined","catch","error","Promise","resolve","require$$0","mVariableGetAll","showSession","showConfig","showReserved","objProp","objectDefinitions","qShowSession","qShowConfig","qShowReserved","sessionObj","sessionObjError","createSessionObject","Error","message","layout","layoutError","getLayout","qVariableList","qItems","mVariableUpdateById","id","definition","comment","variable","variableError","getVariableById","variableProps","variablePropsError","getProperties","qDefinition","qComment","setProps","setPropsError","setProperties","newProps","newPropsError","mVariableUpdateByName","name","getVariableByName","mVariableCreate","varProps","created","createdError","createVariableEx","props","propsError","iGetSelectionsNative","qDoc","selections","selectionsError","destroy","destroyError","destroySessionObject","mSelectionsAll","qSelectionObject","mSelectionsFields","fieldsSelected","qSelections","map","s","qField","mSelectionsSimple","groupByField","qSelectedFieldSelectionInfo","f","field","value","qName","flat","values","mSelectInField","fieldName","toggle","lbDef","qListObjectDef","qDef","qFieldDefs","qInfo","qType","sessionObjErr","index","qListObject","qDataPages","qMatrix","filter","m","indexOf","qText","e","qElemNumber","selection","selectionError","selectListObjectValues","mGetTablesAndFields","tables","getTablesAndKeys","qtr","t","qFields","table","mGetTables","qTables","qTablesError","mGetFields","mCreateSessionListbox","type","mExtensionObjectsAll","allInfos","getAllInfos","filterOnlyExtensionObjects","allObjects","all","extObj","isReallyExtension","realExtensionCheck","qId","isExtension","appName","objId","qObjProps","objType","extName","extensionMeta","extVersion","version","extVisible","visible","extIsBundle","isThirdParty","extIsLibrary","isLibraryItem","qProps","o","a","nativeObjectTypes","qObj","qObjError","getObject","qObjPropsError","visualization","isNative","mUnbuild","unbuildVariables","unbuildScript","unbuildAppProperties","unbuildConnections","unbuildEntities","variables","script","appProperties","connections","dimensions","measures","objects","app","sessionObjLayout","sessionObjLayoutErr","delSessionObj","delSessionObjErr","scriptErr","getScript","appPropertiesError","getAppProperties","appConnections","appConnectionsErr","getConnections","appAllInfos","appAllInfosErr","item","dim","dimErr","getDimension","dimProp","dimPropErr","push","measure","measureErr","getMeasure","measureProp","measurePropErr","processObject","errors","obj","objErr","parent","parentErr","getParent","children","childrenErr","getChildInfos","length","propTree","propTreeErr","getFullPropertyTree","prop","propErr","mBuild","processMeasures","processDimensions","processVariables","processScript","processAppProperties","processConnections","processObjects","d","createMeasure","status","updated","dimension","createDimension","setScript","update","setAppProperties","qVar","qVarError","connection","conn","find","create","createConnection","modify","modifyConnection","object","isGenericObject","qProperty","objError","setFullPropertyTree","oError","createObject","updatedError","docMixin","types","init","args","extend","qTablesAndFields","qVariables","extensionObjects","unbuild","build"],"mappings":"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"}